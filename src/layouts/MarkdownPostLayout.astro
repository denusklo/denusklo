---
import BaseLayout from '../layouts/BaseLayout.astro';
import StructuredData from '../components/StructuredData.astro';

const { frontmatter } = Astro.props;

// Article schema for blog posts - helps Google show rich results
const articleSchema = {
  '@context': 'https://schema.org',
  '@type': 'Article',
  headline: frontmatter.title,
  description: frontmatter.description,
  image: frontmatter.image?.url,
  datePublished: frontmatter.pubDate,
  author: {
    '@type': 'Person',
    name: 'Den Kong',
  },
  publisher: {
    '@type': 'Organization',
    name: 'Den Kong Portfolio',
    logo: {
      '@type': 'ImageObject',
      url: 'https://denusklo.com/og-image.jpg',
    },
  },
  mainEntityOfPage: {
    '@type': 'WebPage',
    '@id': `https://denusklo.com${Astro.url.pathname}`,
  },
};
---
<BaseLayout pageTitle={frontmatter.title}>
  <!-- Article schema for rich results -->
  <StructuredData data={articleSchema} />

  <p>{frontmatter.pubDate.slice(0,10)}</p>
  <p><em>{frontmatter.description}</em></p>
  <p>Written by: {frontmatter.author}</p>
  <img src={frontmatter.image.url} width="300" alt={frontmatter.image.alt} />
  <slot />
  <div class="tags">
    {frontmatter.tags.map((tag) => (
      <p class="tag"><a href={`tags/${tag}`}>{tag}</a></p>
    ))}
  </div>
</BaseLayout>

<style>
  a {
    color: #00539F;
  }

  .tags {
    display: flex;
    flex-wrap: wrap;
    margin: 0 auto;
  }

  .tag {
    margin: 0.25em;
    border: dotted 1px #a1a1a1;
    border-radius: .5em;
    padding: .5em 1em;
    font-size: 1.15em;
    background-color: #F8FCFD;
  }
</style>